<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Privacy Policy - GlobeTrotters</title>
    <link rel="stylesheet" href="styles/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
   <!-- Replace the inline paddings with consistent values and ensure proper spacing throughout the document. 
Below are the main changes for proper padding: -->

<style>
    body {
        background: linear-gradient(120deg, #e3f2fd 60%, #12365a 100%);
        font-family: 'Segoe UI', Arial, sans-serif;
        color: #222;
        margin: 0;
        padding: 0;
    }
    .privacy-container {
        max-width: 800px;
        margin: 48px auto 32px;
        background: #0a4952;
        border-radius: 18px;
        box-shadow: 0 4px 32px #009be31a;
        padding: 40px 36px; /* Increased and unified padding */
    }
    h1, h2, h3 {
        color: #009be3;
        margin-top: 0;
        padding-bottom: 8px;
    }
    h1 {
        font-size: 2.3em;
        margin-bottom: 16px;
    }
    h2 {
        font-size: 1.4em;
        margin-top: 32px;
    }
    ul, ol {
        margin-left: 24px;
        padding-left: 16px;
    }
    a {
        color: #009be3;
        text-decoration: underline;
    }
    .icon-lock {
        color: #43e97b;
        margin-right: 8px;
    }
    .support-chat-container {
        padding: 24px 0 0 0;
    }
    #support-chat-widget {
        border: 1px solid #ccc;
        border-radius: 8px;
        max-width: 350px;
        margin: 0 auto;
        background: #181818;
        color: #fff;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 0;
    }
    #chat-header {
        padding: 14px 20px;
        background: #009be3;
        border-radius: 8px 8px 0 0;
        display: flex;
        align-items: center;
    }
    #chat-messages {
        height: 180px;
        overflow-y: auto;
        padding: 14px 16px;
        background: #222;
    }
    #chat-form {
        display: flex;
        border-top: 1px solid #333;
        padding: 10px 12px;
        gap: 8px;
    }
    #chat-input {
        flex: 1;
        padding: 8px 12px;
        border: none;
        background: #222;
        color: #fff;
        border-radius: 6px;
    }
    #chat-form button {
        background: #009be3;
        color: #fff;
        border: none;
        padding: 8px 18px;
        border-radius: 6px;
        cursor: pointer;
    }
    /* Modal Overlay */
    #newsletter-modal.modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0; top: 0;
        width: 100vw; height: 100vh;
        overflow: auto;
        background: rgba(0,0,0,0.38);
        transition: background 0.2s;
        padding: 0;
    }
    #newsletter-modal .modal-content {
        margin: 60px auto;
        background: linear-gradient(135deg,#fff 80%,#e3f2fd 100%);
        border-radius: 18px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        max-width: 420px;
        padding: 36px 32px;
        position: relative;
        animation: modalFadeIn 0.4s;
    }
    @keyframes modalFadeIn {
        from { opacity: 0; transform: translateY(40px);}
        to   { opacity: 1; transform: translateY(0);}
    }
    #newsletter-modal .close {
        font-size: 28px;
        position: absolute;
        top: 18px;
        right: 24px;
        cursor: pointer;
        color: #009be3;
        transition: color 0.2s;
        padding: 2px 8px;
    }
    #newsletter-modal .close:hover {
        color: #005b8c;
    }
    #newsletter-modal input[type="email"],
    #newsletter-modal input[type="text"],
    #newsletter-modal select {
        width: 100%;
        padding: 12px 14px;
        border-radius: 7px;
        border: 1px solid #b3e5fc;
        background: #f7fbff;
        font-size: 1em;
        margin-top: 4px;
        margin-bottom: 2px;
        box-sizing: border-box;
    }
    #newsletter-modal button[type="submit"] {
        width: 100%;
        background: #009be3;
        color: #fff;
        padding: 14px 0;
        border: none;
        border-radius: 7px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
        margin-top: 8px;
    }
    #newsletter-modal button[type="submit"]:hover {
        background: #007bb8;
    }
    #newsletter-modal label {
        font-weight: 500;
        color: #222;
        padding-bottom: 4px;
        display: block;
    }
    #newsletter-modal .form-group {
        margin-bottom: 18px;
    }
    #newsletter-modal small {
        color: #888;
        padding-top: 2px;
        display: block;
    }
    #newsletter-modal #newsletter-success {
        display: none;
        color: green;
        margin-top: 14px;
        text-align: center;
        font-weight: 500;
    }
    #newsletter-modal #newsletter-error {
        display: none;
        color: red;
        margin-top: 14px;
        text-align: center;
        font-weight: 500;
    }
    @media (max-width: 600px) {
        .privacy-container {
            padding: 18px 6vw;
        }
        #newsletter-modal .modal-content {
            max-width: 97vw;
            padding: 18px 6vw;
            margin: 30px auto;
        }
        #support-chat-widget {
            max-width: 98vw;
        }
    }
    /* Footer */
    .footer-container {
        max-width: 1200px;
        margin: auto;
        display: flex;
        flex-wrap: wrap;
        justify-content: space-between;
        align-items: flex-start;
        gap: 36px;
        padding: 0 24px;
        border-radius: 18px; /* Added rounded edges */
        overflow: hidden;    /* Ensures children respect border-radius */
    }
    .footer-logo,
    .footer-links,
    .footer-contact,
    .footer-newsletter,
    .footer-social-media {
        padding: 12px 0;
    }
    .footer-links ul {
        padding-left: 0;
    }
    .footer-links li {
        margin-bottom: 8px;
    }
    .footer-newsletter form {
        display: flex;
        gap: 8px;
        padding-top: 4px;
    }
    .footer-newsletter input[type="email"] {
        flex: 1;
        padding: 10px 12px;
        border-radius: 6px;
        border: none;
        background: #f7fbff;
        color: #222;
    }
    .footer-newsletter button {
        background: #009be3;
        color: #fff;
        border: none;
        padding: 10px 18px;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
    }
    .footer-social-media {
        text-align: center;
        padding-top: 8px;
    }
    @media (max-width: 900px) {
        .footer-container { flex-direction: column; align-items: flex-start; gap:18px; }
        .footer-social-media { text-align:left; }
    }
</style>

</head>
<body>
    <div class="privacy-container">
        <h1><i class="fas fa-user-shield icon-lock"></i> Privacy Policy</h1>
        <p>
            At <strong>GlobeTrotters</strong>, your privacy is important to us. This Privacy Policy explains how we collect, use, and protect your personal information when you use our website and services.
        </p>

        <h2>1. Information We Collect</h2>
        <ul>
            <li><strong>Personal Information:</strong> Name, email address, phone number, and other details you provide when booking a trip, subscribing to our newsletter, or contacting support.</li>
            <li><strong>Payment Information:</strong> Payment method details (e.g., M-Pesa, PayPal, etc.) for processing transactions. We do not store your full payment details on our servers.</li>
            <li><strong>Usage Data:</strong> Information about how you use our website, such as pages visited, time spent, and browser/device information.</li>
        </ul>

        <h2>2. How We Use Your Information</h2>
        <ul>
            <li>To process bookings and provide requested services.</li>
            <li>To send you confirmations, updates, and customer support responses.</li>
            <li>To send newsletters and promotional emails (with your consent).</li>
        </ul>

        <!-- Contact -->
        <section class="section-contact" id="contact">
            
            <div class="support-chat-container">
                <h2>24/7 Live Support</h2>
                <div id="support-chat-widget" style="border:1px solid #ccc; border-radius:8px; max-width:350px; margin:auto; background:#181818; color:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.1);">
                    <div id="chat-header" style="padding:10px 15px; background:#009be3; border-radius:8px 8px 0 0; display:flex; align-items:center;">
                        <i class="fas fa-headset" style="margin-right:8px;"></i>
                        <span>GlobeTrotters Support Agent</span>
                        <span style="margin-left:auto; font-size:12px; color:#b2ffb2;">Online 24/7</span>
                    </div>
                    <div id="chat-messages" style="height:180px; overflow-y:auto; padding:10px; background:#222;"></div>
                    <form id="chat-form" style="display:flex; border-top:1px solid #333;">
                        <input type="text" id="chat-input" placeholder="Type your message..." autocomplete="off" style="flex:1; padding:8px; border:none; background:#222; color:#fff;">
                        <button type="submit" style="background:#009be3; color:#fff; border:none; padding:0 16px; cursor:pointer;">Send</button>
                    </form>
                </div>
            </div>
        </section>
    </main>
    <!-- Newsletter Modal (Advanced Version) -->
    <div id="newsletter-modal" class="modal" style="z-index:9999;">
        <div class="modal-content" style="max-width:420px; padding:32px 28px; border-radius:18px; background:linear-gradient(135deg,#5f6265 80%,#326c96 100%); box-shadow:0 8px 32px rgba(0,0,0,0.18); position:relative;">
            <span class="close" id="newsletter-close" style="font-size:28px;position:absolute;top:18px;right:24px;cursor:pointer;">&times;</span>
            <div style="display:flex;align-items:center;gap:12px;margin-bottom:10px;">
                <i class="fas fa-envelope-open-text" style="font-size:2.2em;color:#009be3;"></i>
                <h2 style="margin:0;font-size:1.5em;">Join Our Travel Newsletter</h2>
            </div>
            <p style="color:#333;margin-bottom:18px;">Get <b>exclusive deals</b>, travel inspiration, and expert tips delivered to your inbox every month!</p>
            <form id="newsletter-form" autocomplete="off" style="margin-bottom:0;">
                <div class="form-group" style="margin-bottom:16px;">
                    <label for="newsletter-email" style="font-weight:500;">Email Address:</label>
                    <input type="email" id="newsletter-email" name="email" placeholder="e.g. you@email.com" required style="width:100%;padding:10px 12px;border-radius:7px;border:1px solid #b3e5fc;background:#f7fbff;">
                </div>
                <div class="form-group" style="margin-bottom:16px;">
                    <label>
                        <input type="checkbox" id="newsletter-consent" required>
                        <span style="font-size:0.97em;">I agree to receive emails from GlobeTrotters.</span>
                    </label>
                </div>
                <div class="form-group" style="margin-bottom:16px;">
                    <label for="newsletter-country" style="font-weight:500;">Country (optional):</label>
                    <input type="text" id="newsletter-country" name="country" placeholder="Your country" style="width:100%;padding:10px 12px;border-radius:7px;border:1px solid #b3e5fc;background:#f7fbff;">
                </div>
                <div class="form-group" style="margin-bottom:18px;">
                    <label for="newsletter-interests" style="font-weight:500;">Interests (optional):</label>
                    <select id="newsletter-interests" name="interests" multiple style="width:100%;padding:10px 12px;border-radius:7px;border:1px solid #b3e5fc;background:#f7fbff;">
                        <option value="work">Work Abroad</option>
                        <option value="study">Study Abroad</option>
                        <option value="adventure">Adventure Travel</option>
                        <option value="family">Family Trips</option>
                        <option value="luxury">Luxury</option>
                        <option value="budget">Budget Travel</option>
                    </select>
                    <small style="color:#888;">Hold Ctrl (Windows) or Cmd (Mac) to select multiple.</small>
                </div>
                <button type="submit" style="width:100%;background:#009be3;color:#fff;padding:12px 0;border:none;border-radius:7px;font-size:1.1em;font-weight:600;cursor:pointer;transition:background 0.2s;">Subscribe</button>
                <div id="newsletter-success" style="display:none;color:green;margin-top:14px;text-align:center;font-weight:500;">
                    <i class="fas fa-check-circle"></i> Thank you for subscribing!
                </div>
                <div id="newsletter-error" style="display:none;color:red;margin-top:14px;text-align:center;font-weight:500;">
                    <i class="fas fa-exclamation-circle"></i> Subscription failed. Please try again.
                </div>
            </form>
            <div style="margin-top:18px;text-align:center;font-size:0.97em;color:#666;">
                <i class="fas fa-lock"></i> We respect your privacy. <a href="privacy.html" style="color:#009be3;text-decoration:underline;">Privacy Policy</a>
            </div>
        </div>
    </div>
    <style>
    /* Modal Overlay */
    #newsletter-modal.modal {
        display: none;
        position: fixed;
        z-index: 9999;
        left: 0; top: 0;
        width: 100vw; height: 100vh;
        overflow: auto;
        background: rgba(0,0,0,0.38);
        transition: background 0.2s;
    }
    #newsletter-modal .modal-content {
        margin: 60px auto;
        background: linear-gradient(135deg,#fff 80%,#e3f2fd 100%);
        border-radius: 18px;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18);
        max-width: 420px;
        padding: 32px 28px;
        position: relative;
        animation: modalFadeIn 0.4s;
    }
    @keyframes modalFadeIn {
        from { opacity: 0; transform: translateY(40px);}
        to   { opacity: 1; transform: translateY(0);}
    }
    #newsletter-modal .close {
        font-size: 28px;
        position: absolute;
        top: 18px;
        right: 24px;
        cursor: pointer;
        color: #009be3;
        transition: color 0.2s;
    }
    #newsletter-modal .close:hover {
        color: #005b8c;
    }
    #newsletter-modal input[type="email"],
    #newsletter-modal input[type="text"],
    #newsletter-modal select {
        width: 100%;
        padding: 10px 12px;
        border-radius: 7px;
        border: 1px solid #b3e5fc;
        background: #f7fbff;
        font-size: 1em;
        margin-top: 4px;
        margin-bottom: 2px;
        box-sizing: border-box;
    }
    #newsletter-modal button[type="submit"] {
        width: 100%;
        background: #009be3;
        color: #fff;
        padding: 12px 0;
        border: none;
        border-radius: 7px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s;
        margin-top: 8px;
    }
    #newsletter-modal button[type="submit"]:hover {
        background: #007bb8;
    }
    #newsletter-modal label {
        font-weight: 500;
        color: #222;
    }
    #newsletter-modal .form-group {
        margin-bottom: 16px;
    }
    #newsletter-modal small {
        color: #888;
    }
    #newsletter-modal #newsletter-success {
        display: none;
        color: green;
        margin-top: 14px;
        text-align: center;
        font-weight: 500;
    }
    #newsletter-modal #newsletter-error {
        display: none;
        color: red;
        margin-top: 14px;
        text-align: center;
        font-weight: 500;
    }
    @media (max-width: 600px) {
        #newsletter-modal .modal-content {
            max-width: 97vw;
            padding: 18px 6vw;
            margin: 30px auto;
        }
    }
    </style>
        <script>
            // Advanced Newsletter Modal Logic
            (function() {
                const newsletterModal = document.getElementById('newsletter-modal');
                const newsletterClose = document.getElementById('newsletter-close');
                const newsletterForm = document.getElementById('newsletter-form');
                const newsletterSuccess = document.getElementById('newsletter-success');
                const newsletterError = document.getElementById('newsletter-error');
                let newsletterShown = false;

                setTimeout(() => {
                    if (!localStorage.getItem('newsletterSubscribed') && !newsletterShown) {
                        newsletterModal.style.display = 'block';
                        newsletterShown = true;
                    }
                }, 4000);

                newsletterClose.onclick = function() {
                    newsletterModal.style.display = 'none';
                };
                window.addEventListener('click', function(event) {
                    if (event.target == newsletterModal) {
                        newsletterModal.style.display = 'none';
                    }
                });

                newsletterForm.onsubmit = function(e) {
                    e.preventDefault();
                    newsletterSuccess.style.display = "none";
                    newsletterError.style.display = "none";
                    const email = document.getElementById('newsletter-email').value;
                    const consent = document.getElementById('newsletter-consent').checked;
                    const country = document.getElementById('newsletter-country').value;
                    const interestsSelect = document.getElementById('newsletter-interests');
                    const interests = Array.from(interestsSelect.selectedOptions).map(opt => opt.value);

                    if (!consent) {
                        newsletterError.textContent = "You must agree to receive emails.";
                        newsletterError.style.display = "block";
                        return;
                    }

                    // Simulate API call (replace with your backend or EmailJS integration)
                    fetch('https://api.emailjs.com/api/v1.0/email/subscribe', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, country, interests })
                    })
                    .then(res => {
                        if (res.ok) {
                            newsletterSuccess.style.display = "block";
                            newsletterError.style.display = "none";
                            localStorage.setItem('newsletterSubscribed', 'true');
                            setTimeout(() => {
                                newsletterModal.style.display = 'none';
                                newsletterSuccess.style.display = "none";
                                newsletterForm.reset();
                            }, 2000);
                        } else {
                            throw new Error('Subscription failed');
                        }
                    })
                    .catch(() => {
                        newsletterError.textContent = "Subscription failed. Please try again.";
                        newsletterError.style.display = "block";
                    });
                };
            })();
        </script>

    <!-- Scroll to Top Button -->
    <div class="scroll-to-top" id="scrollToTop">
        <i class="fas fa-chevron-up"></i>
    </div>

    <!-- Footer -->
    <footer style="background:linear-gradient(120deg,#12365a 60%,#13311f 100%);color:#fff;padding:36px 0 18px;box-shadow:0 -2px 18px #009be31a;">
        <div class="footer-container" style="max-width:1200px;margin:auto;display:flex;flex-wrap:wrap;justify-content:space-between;align-items:flex-start;gap:36px;">
            <!-- Logo & Tagline -->
            <div class="footer-logo" style="flex:1 1 220px;min-width:200px;">
                <div style="display:flex;align-items:center;gap:12px;">
                    <video width="48" height="48" style="border-radius:12px;" autoplay loop muted>
                        <source src="imgs/top.mp4">
                    </video>
                    <span style="font-size:1.3em;font-weight:700;letter-spacing:1px;">JeffGlobe</span>
                </div>
                <div style="margin-top:10px;font-size:1.05em;color:#b3e5fc;">
                    Explore. Work. Study. Adventure.
                </div>
            </div>
            <!-- Quick Links -->
            <div class="footer-links" style="flex:1 1 160px;min-width:140px;">
                <h3 style="color:#43e97b;font-size:1.1em;margin-bottom:10px;">Quick Links</h3>
                <ul style="list-style:none;padding:0;margin:0;">
                    <li><a href="index.html" style="color:#fff;text-decoration:none;">Home</a></li>
                    <li><a href="#services" style="color:#fff;text-decoration:none;">Services</a></li>
                    <li><a href="#about" style="color:#fff;text-decoration:none;">About Us</a></li>
                    <li><a href="#destinations" style="color:#fff;text-decoration:none;">Destinations</a></li>
                    <li><a href="#contact" style="color:#fff;text-decoration:none;">Contact</a></li>
                    <li><a href="#feedback" style="color:#fff;text-decoration:none;">Feedback</a></li>
                </ul>
            </div>
            <!-- Contact Info -->
            <div class="footer-contact" style="flex:1 1 220px;min-width:200px;">
                <h3 style="color:#43e97b;font-size:1.1em;margin-bottom:10px;">Contact</h3>
                <p style="margin:0 0 6px;"><i class="fas fa-envelope" style="color:#009be3;"></i> info@globetrotters.com</p>
                <p style="margin:0 0 6px;"><i class="fas fa-phone" style="color:#009be3;"></i> +123-456-7890</p>
                <p style="margin:0;"><i class="fas fa-map-marker-alt" style="color:#009be3;"></i> 123 Globe St, World City</p>
            </div>
            <!-- Newsletter Signup -->
            <div class="footer-newsletter" style="flex:1 1 260px;min-width:220px;">
                <h3 style="color:#43e97b;font-size:1.1em;margin-bottom:10px;">Travel Newsletter</h3>
                <form id="footer-newsletter-form" autocomplete="off" style="display:flex;gap:8px;">
                    <input type="email" id="footer-newsletter-email" placeholder="Your email" required style="flex:1;padding:8px 10px;border-radius:6px;border:none;background:#f7fbff;color:#222;">
                    <button type="submit" style="background:#009be3;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-weight:600;cursor:pointer;">Subscribe</button>
                </form>
                <div id="footer-newsletter-success" style="display:none;color:#43e97b;margin-top:8px;font-size:0.98em;">
                    <i class="fas fa-check-circle"></i> Subscribed!
                </div>
                <div id="footer-newsletter-error" style="display:none;color:#ff512f;margin-top:8px;font-size:0.98em;">
                    <i class="fas fa-exclamation-circle"></i> Subscription failed.
                </div>
            </div>
            <!-- Social Media -->
            <div class="footer-social-media" style="flex:1 1 120px;min-width:100px;text-align:center;">
                <h3 style="color:#43e97b;font-size:1.1em;margin-bottom:10px;">Follow Us</h3>
                <div style="display:flex;gap:14px;justify-content:center;">
                    <!-- <a href="https://facebook.com" target="_blank" aria-label="Facebook" style="color:#fff;font-size:1.5em;"><i class="fab fa-facebook"></i></a> -->
                    <a href="https://x.com" target="_blank" aria-label="Twitter/X" style="color:#141414;font-size:1.5em;">
                        <!-- SVG for X (Twitter) icon -->
                        <svg viewBox="0 0 120 120" width="1.3em" height="1.3em" style="vertical-align:middle;" aria-hidden="true" focusable="false">
                            <rect width="120" height="120" rx="24" fill="#fff" />
                            <path d="M85.7 34.5h13.1L71.6 59.5l30.2 36H77.2l-19-22.7-21.7 22.7H23.3l28.5-29.8-29-34.2h27.2l17.1 20.5 19.6-20.5zm-4.6 54.2h7.3L40.1 39.1h-7.8l48.8 49.6z" fill="#000"/>
                        </svg>
                    </a>
                    <a href="https://instagram.com" target="_blank" aria-label="Instagram" style="color:#fff;font-size:1.5em;"><i class="fab fa-instagram"></i></a>
                    <a href="https://t.me/" target="_blank" aria-label="Telegram" style="color:#fff;font-size:1.5em;"><i class="fab fa-telegram"></i></a>
                </div>
            </div>
        </div>
        <hr style="border:0;border-top:1px solid #43e97b33;margin:32px 0 16px;">
        <div style="text-align:center;font-size:0.98em;color:#b3e5fc;">
            &copy; 2023-2024 GlobeTrotters. All rights reserved. | <a href="privacy.html" style="color:#43e97b;text-decoration:underline;">Privacy Policy</a>
        </div>
        <style>
            .footer-container a:hover { color: #43e97b !important; }
            .footer-container ul li { margin-bottom: 6px; }
            @media (max-width: 900px) {
                .footer-container { flex-direction: column; align-items: flex-start; gap:18px; }
                .footer-social-media { text-align:left; }
            }
        </style>
        <script>
            // Footer newsletter AJAX logic
            document.getElementById('footer-newsletter-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const email = document.getElementById('footer-newsletter-email').value;
                const success = document.getElementById('footer-newsletter-success');
                const error = document.getElementById('footer-newsletter-error');
                success.style.display = "none";
                error.style.display = "none";
                fetch('https://api.emailjs.com/api/v1.0/email/subscribe', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ email })
                })
                .then(res => {
                    if (res.ok) {
                        success.style.display = "block";
                        error.style.display = "none";
                        setTimeout(() => {
                            success.style.display = "none";
                            document.getElementById('footer-newsletter-form').reset();
                        }, 2000);
                    } else {
                        throw new Error('Subscription failed');
                    }
                })
                .catch(() => {
                    error.style.display = "block";
                });
            });
        </script>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script>
        // Booking Modal Logic
        const modal = document.getElementById("bookingModal");
        const btn = document.getElementById("bookTripBtn");
        const span = document.getElementsByClassName("close")[0];
        const back = document.getElementsByClassName("back")[0];
        const form = document.getElementById("bookingForm");
        const formGroups = document.querySelectorAll('.form-group');
        const notification = document.getElementById("notification");
        const departureDateInput = document.getElementById('departureDate');
        const returnDateInput = document.getElementById('returnDate');

        btn.onclick = function() {
            modal.style.display = "block";
            animateFormGroups();
        }
        span.onclick = function() {
            modal.style.display = "none";
        }
        back.onclick = function() {
            modal.style.display = "none";
        }
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }
        form.onsubmit = function(e) {
            e.preventDefault();
            if (validateForm()) {
                sendEmail();
                showNotification();
                modal.style.display = "none";
                form.reset();
            }
        }
        function validateForm() {
            const departureDate = new Date(departureDateInput.value);
            const returnDate = new Date(returnDateInput.value);
            const dateError = document.getElementById('dateError');
            if (returnDate < departureDate) {
                dateError.textContent = "Return date cannot be earlier than departure date.";
                return false;
            } else {
                dateError.textContent = "";
                return true;
            }
        }
        function sendEmail() {
            const templateParams = {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                destination: document.getElementById('destination').value,
                departureDate: departureDateInput.value,
                returnDate: returnDateInput.value,
                travelers: document.getElementById('travelers').value
            };
            emailjs.send('ZBYfWgHXtvMpig0L1', 'template_y7nbvfu', templateParams)
                .then(function(response) {
                    console.log('SUCCESS!', response.status, response.text);
                }, function(error) {
                    console.log('FAILED...', error);
                });
        }
        // Set minimum date for departure to today
        const today = new Date().toISOString().split('T')[0];
        departureDateInput.min = today;
        departureDateInput.addEventListener('change', function() {
            returnDateInput.min = this.value;
            returnDateInput.value = '';
        });
        departureDateInput.addEventListener('change', validateForm);
        returnDateInput.addEventListener('change', validateForm);
        function showNotification() {
            notification.style.display = "block";
            setTimeout(() => {
                notification.style.display = "none";
            }, 5000);
        }
        function animateFormGroups() {
            formGroups.forEach((group, index) => {
                setTimeout(() => {
                    group.classList.add('visible');
                }, index * 100);
            });
        }
    </script>
    <script>
        // Price Calculation
        const destinationPrices = {
            paris: 1000,
            tokyo: 1200,
            newyork: 800,
            bali: 900,
            rome: 1100
        };
        function updatePrice() {
            const destination = document.getElementById('destination').value;
            const travelers = parseInt(document.getElementById('travelers').value, 10) || 1;
            const basePrice = destinationPrices[destination] || 0;
            const totalPrice = basePrice * travelers;
            document.getElementById('price').value = '$' + totalPrice;
        }
        document.getElementById('travelers').addEventListener('input', updatePrice);
    </script>
    <script>
        // Payment Fields Toggle
        function togglePaymentFields() {
            const paymentMethod = document.getElementById('paymentMethod').value;
            const fields = [
                'paypal-button-container', 'mpesaFields', 'mpesa-button-container',
                'venmoFields', 'venmo-button-container', 'cashappFields', 'cashapp-button-container',
                'moneygramFields', 'moneygram-button-container', 'sendwaveFields', 'sendwave-button-container',
                'wiseFields', 'wise-button-container', 'bitcoinFields'
            ];
            fields.forEach(id => {
                const el = document.getElementById(id);
                if (el) el.style.display = 'none';
            });
            switch (paymentMethod) {
                case 'mpesa':
                    document.getElementById('mpesaFields').style.display = 'block';
                    document.getElementById('mpesa-button-container').style.display = 'block';
                    break;
                case 'paypal':
                    document.getElementById('paypal-button-container').style.display = 'block';
                    break;
                case 'venmo':
                    document.getElementById('venmoFields').style.display = 'block';
                    document.getElementById('venmo-button-container').style.display = 'block';
                    break;
                case 'cashapp':
                    document.getElementById('cashappFields').style.display = 'block';
                    document.getElementById('cashapp-button-container').style.display = 'block';
                    break;
                case 'moneygram':
                    document.getElementById('moneygramFields').style.display = 'block';
                    document.getElementById('moneygram-button-container').style.display = 'block';
                    break;
                case 'sendwave':
                    document.getElementById('sendwaveFields').style.display = 'block';
                    document.getElementById('sendwave-button-container').style.display = 'block';
                    break;
                case 'wise':
                    document.getElementById('wiseFields').style.display = 'block';
                    document.getElementById('wise-button-container').style.display = 'block';
                    break;
                case 'bitcoin':
                    document.getElementById('bitcoinFields').style.display = 'block';
                    break;
            }
        }
        document.getElementById('mpesaOption').addEventListener('change', function () {
            const selectedOption = this.value;
            document.getElementById('paybillFields').style.display = selectedOption === 'paybill' ? 'block' : 'none';
            document.getElementById('tillFields').style.display = selectedOption === 'till' ? 'block' : 'none';
        });
    </script>
    <script>
        // PayPal Button
        paypal.Buttons({
            createOrder: function (data, actions) {
                return actions.order.create({
                    purchase_units: [{
                        amount: {
                            value: document.getElementById('price').value.replace('$', '')
                        }
                    }]
                });
            },
            onApprove: function (data, actions) {
                return actions.order.capture().then(function (details) {
                    alert('Transaction completed by ' + details.payer.name.given_name);
                    document.getElementById('bookingForm').submit();
                });
            }
        }).render('#paypal-button-container');
    </script>
    <script>
        // M-Pesa Button Example
        document.getElementById('mpesa-button').addEventListener('click', function() {
            const phoneNumber = prompt("Enter your M-Pesa phone number:");
            const amount = prompt("Enter the amount to pay:");
            if (!phoneNumber || !amount) {
                alert("Phone number and amount are required.");
                return;
            }
            fetch('/api/mpesa/pay', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ phoneNumber, amount })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert('Payment initiated. Please complete the payment on your phone.');
                } else {
                    alert('Payment failed: ' + (data.message || 'Unknown error'));
                }
            })
            .catch(error => {
                alert('Error initiating payment: ' + error.message);
            });
        });
    </script>
    <script>
        // Testimonials Carousel
        const testimonialsContainer = document.getElementById('testimonialsContainer');
        const testimonials = testimonialsContainer.children;
        let currentTestimonial = 0;
        function showNextTestimonial() {
            testimonials[currentTestimonial].classList.remove('active');
            currentTestimonial = (currentTestimonial + 1) % testimonials.length;
            testimonials[currentTestimonial].classList.add('active');
        }
        setInterval(showNextTestimonial, 5000);
    </script>
    <style>
        .testimonials-carousel {
            position: relative;
            min-height: 180px;
        }
        .testimonial {
            opacity: 0;
            transition: opacity 0.7s;
            position: absolute;
            left: 0; right: 0;
            top: 0;
            width: 100%;
            pointer-events: none;
        }
        .testimonial.active {
            opacity: 1;
            position: relative;
            pointer-events: auto;
        }
    </style>
    <script>
        // Feedback Form (no JS needed, default submit)
        document.getElementById('feedbackForm').addEventListener('submit', function(e) {
            // Default form submission
        });
    </script>
    <script>
        (function() {
            emailjs.init("UEI7toHsboKO6jWLVHZCM");
        })();
    </script>
    <script>
        // Copy-to-clipboard for payment fields
        document.querySelectorAll('.copy-btn').forEach(function(btn) {
            btn.addEventListener('click', function() {
                const selector = btn.getAttribute('data-copy');
                const input = document.querySelector(selector);
                if (input) {
                    const wasReadOnly = input.hasAttribute('readonly');
                    input.removeAttribute('readonly');
                    input.select();
                    input.setSelectionRange(0, 99999);
                    document.execCommand('copy');
                    if (wasReadOnly) input.setAttribute('readonly', '');
                    btn.textContent = 'Copied!';
                    setTimeout(() => btn.textContent = 'Copy', 1500);
                }
            });
        });
    </script>
    <script>
        // Newsletter Modal Logic
        const newsletterModal = document.getElementById('newsletter-modal');
        const newsletterClose = document.getElementById('newsletter-close');
        const newsletterForm = document.getElementById('newsletter-form');
        const newsletterSuccess = document.getElementById('newsletter-success');
        const newsletterError = document.getElementById('newsletter-error');
        setTimeout(() => {
            if (!localStorage.getItem('newsletterSubscribed')) {
                newsletterModal.style.display = 'block';
            }
        }, 4000);
        newsletterClose.onclick = function() {
            newsletterModal.style.display = 'none';
        };
        window.onclick = function(event) {
            if (event.target == newsletterModal) {
                newsletterModal.style.display = 'none';
            }
        };
        newsletterForm.onsubmit = function(e) {
            e.preventDefault();
            const email = document.getElementById('newsletter-email').value;
            const consent = document.getElementById('newsletter-consent').checked;
            if (!consent) {
                newsletterError.textContent = "You must agree to receive emails.";
                newsletterError.style.display = "block";
                return;
            }
            fetch('https://api.emailjs.com/api/v1.0/email/subscribe', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email })
            })
            .then(res => {
                if (res.ok) {
                    newsletterSuccess.style.display = "block";
                    newsletterError.style.display = "none";
                    localStorage.setItem('newsletterSubscribed', 'true');
                    setTimeout(() => {
                        newsletterModal.style.display = 'none';
                        newsletterSuccess.style.display = "none";
                        newsletterForm.reset();
                    }, 2000);
                } else {
                    throw new Error('Subscription failed');
                }
            })
            .catch(() => {
                newsletterError.textContent = "Subscription failed. Please try again.";
                newsletterError.style.display = "block";
            });
        };
    </script>
    <script>
        // Support Chat Widget
        const chatMessages = document.getElementById('chat-messages');
        const chatForm = document.getElementById('chat-form');
        const chatInput = document.getElementById('chat-input');
        function getSmartReply(message) {
            const msg = message.toLowerCase();
            if (msg.includes('hello') || msg.includes('hi')) return "Hello! ðŸ‘‹ How can I assist you today?";
            if (msg.includes('book') || msg.includes('trip')) return "To book a trip, click the 'Book a Trip' button at the top or let me know your destination and dates!";
            if (msg.includes('price') || msg.includes('cost')) return "Our prices vary by destination. Please specify your destination for a quote.";
            if (msg.includes('support') || msg.includes('help')) return "I'm here to help 24/7! Please describe your issue or question.";
            if (msg.includes('contact') || msg.includes('agent')) return "You can reach us by email at info@globetrotters.com or call +123-456-7890. For urgent matters, reply 'urgent'.";
            if (msg.includes('urgent')) return "An agent has been notified and will respond as soon as possible. Please provide your email or phone for follow-up.";
            if (msg.includes('payment')) return "We accept M-Pesa, PayPal, Venmo, CashApp, MoneyGram, Sendwave, Wise, and Bitcoin. Which would you like to use?";
            if (msg.includes('newsletter')) return "You can subscribe to our newsletter using the popup or at the bottom of this page!";
            if (msg.includes('thanks') || msg.includes('thank you')) return "You're welcome! If you need anything else, just ask.";
            return "Thank you for your message! A support agent will reply soon. Meanwhile, you can ask about booking, payments, or destinations.";
        }
        function appendMessage(text, sender = 'user') {
            const msgDiv = document.createElement('div');
            msgDiv.style.margin = '8px 0';
            msgDiv.style.display = 'flex';
            msgDiv.style.flexDirection = sender === 'user' ? 'row-reverse' : 'row';
            msgDiv.innerHTML = `<div style="max-width:75%;padding:8px 12px;border-radius:16px;${sender === 'user' ? 'background:#009be3;color:#fff;' : 'background:#333;color:#fff;'}">${text}</div>`;
            chatMessages.appendChild(msgDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
        appendMessage("Hi! ðŸ‘‹ I'm your 24/7 GlobeTrotters support agent. How can I help you today?", 'agent');
        chatForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const userMsg = chatInput.value.trim();
            if (!userMsg) return;
            appendMessage(userMsg, 'user');
            chatInput.value = '';
            setTimeout(() => {
                const reply = getSmartReply(userMsg);
                appendMessage(reply, 'agent');
            }, 700 + Math.random() * 600);
        });
    </script>
</body>
</html>
